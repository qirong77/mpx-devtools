<template>
  <view class="container">
    <!-- å¤´éƒ¨æ¬¢è¿åŒºåŸŸ -->
    <view class="header-section">
      <view class="welcome-card card">
        <view class="title">ğŸš€ æ¬¢è¿ä½¿ç”¨ MPX</view>
        <view class="subtitle">è·¨å¹³å°å°ç¨‹åºå¼€å‘æ¡†æ¶</view>
        <view class="text">ä¸€å¥—ä»£ç ï¼Œå¤šç«¯è¿è¡Œ - å¾®ä¿¡ã€æ”¯ä»˜å®ã€ç™¾åº¦ã€å­—èŠ‚è·³åŠ¨å°ç¨‹åºä»¥åŠ Web</view>
        <button class="btn-primary" bindtap="navigateToComponents">æ¢ç´¢ç»„ä»¶</button>
      </view>
    </view>

    <!-- ç‰¹æ€§å±•ç¤ºåŒºåŸŸ -->
    <view class="features-section">
      <view class="title">âœ¨ æ ¸å¿ƒç‰¹æ€§</view>
      <feature-card 
        wx:for="{{features}}" 
        wx:key="id"
        title="{{item.title}}"
        description="{{item.description}}"
        icon="{{item.icon}}">
      </feature-card>
    </view>

    <!-- å¿«é€Ÿå¯¼èˆªåŒºåŸŸ -->
    <view class="navigation-section">
      <view class="title">ğŸ§­ å¿«é€Ÿå¯¼èˆª</view>
      <nav-grid items="{{navItems}}"></nav-grid>
    </view>

    <!-- ç¯å¢ƒä¿¡æ¯ -->
    <view class="env-section">
      <view class="card">
        <view class="subtitle">ğŸ“± å½“å‰ç¯å¢ƒ</view>
        <view class="env-info">
          <view class="env-item">
            <text class="label">å¹³å°ï¼š</text>
            <text class="value">{{platformInfo.platform}}</text>
          </view>
          <view class="env-item">
            <text class="label">ç‰ˆæœ¬ï¼š</text>
            <text class="value">{{platformInfo.version}}</text>
          </view>
          <view class="env-item">
            <text class="label">è®¾å¤‡ï¼š</text>
            <text class="value">{{platformInfo.model}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>
</template>

<script>
import { createPage } from '@mpxjs/core'
import mpx from '@mpxjs/core'

createPage({
  data: {
    features: [
      {
        id: 1,
        title: 'è·¨å¹³å°å¼€å‘',
        description: 'ä¸€å¥—ä»£ç æ”¯æŒå¾®ä¿¡ã€æ”¯ä»˜å®ã€ç™¾åº¦ã€å­—èŠ‚è·³åŠ¨ç­‰å¤šä¸ªå°ç¨‹åºå¹³å°',
        icon: 'ğŸŒ'
      },
      {
        id: 2,
        title: 'æ¸è¿›å¼å¼€å‘',
        description: 'æ”¯æŒåŸç”Ÿå°ç¨‹åºè¯­æ³•ï¼Œå¯ä»¥æ¸è¿›å¼è¿ç§»ç°æœ‰é¡¹ç›®',
        icon: 'ğŸ“ˆ'
      },
      {
        id: 3,
        title: 'Vue.js è¯­æ³•',
        description: 'ä½¿ç”¨ç†Ÿæ‚‰çš„ Vue.js å¼€å‘è¯­æ³•ï¼Œé™ä½å­¦ä¹ æˆæœ¬',
        icon: 'ğŸ’š'
      },
      {
        id: 4,
        title: 'æ€§èƒ½ä¼˜åŒ–',
        description: 'ç¼–è¯‘æ—¶ä¼˜åŒ–å’Œè¿è¡Œæ—¶ä¼˜åŒ–ï¼Œæä¾›æ›´å¥½çš„æ€§èƒ½è¡¨ç°',
        icon: 'âš¡'
      }
    ],
    navItems: [
      { title: 'ç»„ä»¶å±•ç¤º', path: '/pages/components', icon: 'ğŸ§©', color: '#667eea' },
      { title: 'API æ¼”ç¤º', path: '/pages/api-demo', icon: 'ğŸ”§', color: '#f093fb' },
      { title: 'å…³äºé¡¹ç›®', path: '/pages/about', icon: 'â„¹ï¸', color: '#4facfe' }
    ],
    platformInfo: {
      platform: 'æœªçŸ¥',
      version: 'æœªçŸ¥',
      model: 'æœªçŸ¥'
    }
  },

  onLoad() {
    console.debug('Home page loaded')
    console.log(this.$refs)
    this.getPlatformInfo()
  },

  onShow() {
    // é¡µé¢æ˜¾ç¤ºæ—¶æ›´æ–°ä¿¡æ¯
  },

  methods: {
    navigateToComponents() {
      mpx.switchTab({
        url: '/pages/components'
      })
    },

    getPlatformInfo() {
      // è·å–å¹³å°ä¿¡æ¯
      mpx.getSystemInfo({
        success: (res) => {
          this.platformInfo = {
            platform: res.platform || 'æœªçŸ¥',
            version: res.version || 'æœªçŸ¥',
            model: res.model || 'æœªçŸ¥'
          }
        },
        fail: () => {
          console.log('è·å–ç³»ç»Ÿä¿¡æ¯å¤±è´¥')
        }
      })
    }
  }
})
</script>

<style lang="stylus">
.container
  min-height 100vh
//  ä¿®å¤ MPX çš„ BUG
.mpx-tab-bar
    z-index 1000
.header-section
  margin-bottom 40rpx
  
  .welcome-card
    text-align center
    background linear-gradient(135deg, #667eea 0%, #764ba2 100%)
    color white
    
    .title
      color white
      font-size 40rpx
      margin-bottom 15rpx
      
    .subtitle
      color rgba(255, 255, 255, 0.9)
      font-size 30rpx
      margin-bottom 20rpx
      
    .text
      color rgba(255, 255, 255, 0.8)
      font-size 26rpx
      line-height 1.6
      margin-bottom 30rpx

.features-section
  margin-bottom 40rpx
  
  .title
    text-align center
    font-size 32rpx
    font-weight 600
    color #333
    margin-bottom 30rpx

.navigation-section
  margin-bottom 40rpx
  
  .title
    text-align center
    font-size 32rpx
    font-weight 600
    color #333
    margin-bottom 30rpx

.env-section
  .env-info
    .env-item
      display flex
      justify-content space-between
      align-items center
      padding 15rpx 0
      border-bottom 1rpx solid #f0f0f0
      
      &:last-child
        border-bottom none
        
      .label
        font-size 26rpx
        color #666
        
      .value
        font-size 26rpx
        color #333
        font-weight 500
</style>

<script type="application/json">
{
  "usingComponents": {
    "feature-card": "../components/feature-card",
    "nav-grid": "../components/nav-grid"
  },
  "navigationBarTitleText": "MPX Demo é¦–é¡µ"
}
</script>
